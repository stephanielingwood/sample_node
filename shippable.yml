# Language setting
language: node_js

# Version number
node_js:
#  - 0.10
  - 0.12
#  - 4.2.3
#  - 4.6.0
#  - 5.12
#  - 6.7.0
#  - iojs 1.0
#  - iojs 2.0
#  - iojs 3.3.1

services:
#  - cassandra
#  - couchdb
#  - elasticsearch
  - riak
  - selenium

# The path for Xunit to output test reports
env:
  - XUNIT_FILE=shippable/testresults/result.xml

build:
  pre_ci_boot:
    image_name: drydock/u14nodall
    image_tag: tip
    pull: false
  ci:
    - node --version
    - npm install

#    Cassandra
#    - sudo service cassandra status
#    - sudo service cassandra start
#    - sudo service cassandra status
#    - sudo nodetool status
#    - cqlsh - this will start interactive shell; need to figure out how to get back out of it
#    https://www.digitalocean.com/community/tutorials/how-to-install-cassandra-and-run-a-single-node-cluster-on-ubuntu-14-04

#    CouchDB
#    - curl http://127.0.0.1:5984
#    - curl -X PUT http://127.0.0.1:5984/demo
#    - curl -X GET http://127.0.0.1:5984/demo
#    - "curl -H 'Content-Type: application/json' -X POST http://127.0.0.1:5984/demo -d '{\"company\": \"Example, Inc.\"}'"
#    - curl -X GET http://127.0.0.1:5984/demo

#    elasticsearch
#    - will need to write a script: https://www.compose.com/articles/getting-started-with-elasticsearch-and-node/

#    memcached
    - grunt

#  - . installMongo.sh
#  - cat /etc/mongod.conf
#  - sudo mongod --smallfiles &
#  - sleep 15
#  - mongo --eval 'db.collection.find()'

    # Create directories for test and coverage reports
#    - mkdir -p shippable/testresults
#    - mkdir -p shippable/codecoverage


    # Tell istanbul to generate a coverage report
#    - ./node_modules/.bin/istanbul cover grunt -- -u tdd
#    - ./node_modules/.bin/istanbul report cobertura --dir  shippable/codecoverage/

